<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Painel do Motoboy</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 600px; margin: 20px auto; }
    h1 { text-align: center; }
    .pedido { border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; }
    .btn-status { padding: 8px 12px; border: none; color: #fff; cursor: pointer; margin-top: 10px; }
    #notificacao { background: #4CAF50; color: white; padding: 10px; text-align: center; display: none; margin-bottom: 20px; }
  </style>
</head>
<body>

  <h1>Painel do Motoboy</h1>
  <div id="notificacao"></div>
  <div id="listaPedidos"></div>

  <script>
    // Funções para manipular localStorage
    function carregarPedidos() {
      const pedidosJSON = localStorage.getItem('pedidos');
      return pedidosJSON ? JSON.parse(pedidosJSON) : [];
    }
    function salvarPedidos(pedidos) {
      localStorage.setItem('pedidos', JSON.stringify(pedidos));
    }

    // Atualiza o status do pedido
    function atualizarStatus(indice, novoStatus) {
      const pedidos = carregarPedidos();
      if (pedidos[indice]) {
        pedidos[indice].status = novoStatus;
        salvarPedidos(pedidos);
        mostrarPedidos();
        mostrarNotificacao(`Status do pedido #${indice + 1} atualizado para "${novoStatus}".`);
      }
    }

    // Cria botão de status para cada pedido, com o texto e ação conforme status atual
    function criarBotaoStatus(pedido, indice) {
      const btn = document.createElement('button');
      btn.className = 'btn-status';

      if (pedido.status === 'Aguardando motoboy') {
        btn.textContent = 'Aceitar Entrega';
        btn.style.backgroundColor = '#2980b9';
        btn.onclick = () => atualizarStatus(indice, 'Aceito');
      }
      else if (pedido.status === 'Aceito') {
        btn.textContent = 'Ir para coleta';
        btn.style.backgroundColor = '#f39c12';
        btn.onclick = () => atualizarStatus(indice, 'A caminho da coleta');
      }
      else if (pedido.status === 'A caminho da coleta') {
        btn.textContent = 'Entrega realizada';
        btn.style.backgroundColor = '#27ae60';
        btn.onclick = () => atualizarStatus(indice, 'Entregue');
      }
      else if (pedido.status === 'Entregue') {
        btn.textContent = 'Finalizar';
        btn.style.backgroundColor = '#34495e';
        btn.onclick = () => atualizarStatus(indice, 'Finalizado');
      }
      else {
        btn.style.display = 'none';
      }
      return btn;
    }

    // Mostra os pedidos na tela do motoboy
    function mostrarPedidos() {
      const pedidos = carregarPedidos();
      const lista = document.getElementById('listaPedidos');
      lista.innerHTML = '';

      if (pedidos.length === 0) {
        lista.textContent = 'Nenhum pedido disponível.';
        return;
      }

      pedidos.forEach((pedido, i) => {
        const div = document.createElement('div');
        div.className = 'pedido';

        div.innerHTML = `
          <strong>Pedido #${i + 1}</strong><br/>
          Cliente: ${pedido.cliente}<br/>
          Endereço: ${pedido.endereco}<br/>
          Telefone: ${pedido.telefone}<br/>
          <em>Status: ${pedido.status}</em>
        `;

        const btn = criarBotaoStatus(pedido, i);
        div.appendChild(btn);

        lista.appendChild(div);
      });
    }

    // Notificação visual para feedback
    function mostrarNotificacao(msg) {
      const n = document.getElementById('notificacao');
      n.textContent = msg;
      n.style.display = 'block';
      setTimeout(() => { n.style.display = 'none'; }, 3500);
    }

    // Inicializa: criar alguns pedidos exemplo caso não existam
    function inicializarPedidosExemplo() {
      if (!localStorage.getItem('pedidos')) {
        const exemplo = [
          { cliente: 'João Silva', endereco: 'Rua A, 123', telefone: '99999-9999', status: 'Aguardando motoboy' },
          { cliente: 'Maria Souza', endereco: 'Av. B, 456', telefone: '98888-8888', status: 'Aguardando motoboy' }
        ];
        salvarPedidos(exemplo);
      }
    }

    inicializarPedidosExemplo();
    mostrarPedidos();
  </script>
</body>
</html>
