<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Cliente - Fazer Pedido</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #007BFF;
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    margin: 0;
    text-align: center;
  }
  main {
    background: white;
    color: #007BFF;
    padding: 25px;
    border-radius: 10px;
    width: 320px;
  }
  h1 { margin-bottom: 15px; }
  label {
    display: block;
    margin: 10px 0 5px;
    font-weight: bold;
  }
  input, textarea {
    width: 100%;
    padding: 8px;
    border: 1px solid #007BFF;
    border-radius: 5px;
    font-size: 14px;
    box-sizing: border-box;
  }
  button {
    margin-top: 15px;
    width: 100%;
    background: #007BFF;
    color: white;
    font-weight: bold;
    padding: 10px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
  }
  button:hover {
    background: #0056b3;
  }
  small {
    display: block;
    margin-top: 10px;
    color: #333;
  }
</style>
</head>
<body>
<main>
  <h1>Olá, cliente!</h1>
  <p>Esta página é para você fazer seu pedido de entrega. Preencha todos os dados corretamente.</p>
  
  <form id="pedidoForm">
    <label for="nomeCliente">Nome do Cliente (quem entrega)</label>
    <input type="text" id="nomeCliente" required />

    <label for="telefoneCliente">Telefone do Cliente (quem entrega)</label>
    <input type="tel" id="telefoneCliente" required />

    <label for="enderecoColeta">Endereço de Coleta</label>
    <textarea id="enderecoColeta" rows="2" required></textarea>

    <label for="telefoneColeta">Telefone da Coleta</label>
    <input type="tel" id="telefoneColeta" required />

    <label for="enderecoEntrega">Endereço de Entrega</label>
    <textarea id="enderecoEntrega" rows="2" required></textarea>

    <label for="distanciaKm">Distância em km (para calcular a taxa)</label>
    <input type="number" id="distanciaKm" min="1" max="50" required />

    <small>Taxa mínima: R$ 10,00 para até 5km. Acima de 5km: R$ 2,00 por km.</small>

    <button type="submit">Enviar Pedido</button>
  </form>

  <p id="msgSucesso" style="color:green; display:none; margin-top:15px;">Pedido enviado com sucesso!</p>
</main>

<script>
  // Função para calcular a taxa baseado na distância
  function calcularTaxa(distancia) {
    if (distancia <= 5) return 10;
    else return distancia * 2;
  }

  document.getElementById('pedidoForm').addEventListener('submit', function(e) {
    e.preventDefault();

    const nomeCliente = document.getElementById('nomeCliente').value.trim();
    const telefoneCliente = document.getElementById('telefoneCliente').value.trim();
    const enderecoColeta = document.getElementById('enderecoColeta').value.trim();
    const telefoneColeta = document.getElementById('telefoneColeta').value.trim();
    const enderecoEntrega = document.getElementById('enderecoEntrega').value.trim();
    const distanciaKm = parseFloat(document.getElementById('distanciaKm').value);

    const taxa = calcularTaxa(distanciaKm);

    // Cria o pedido com ID (timestamp) e status 'pendente'
    const pedido = {
      id: Date.now(),
      nomeCliente,
      telefoneCliente,
      enderecoColeta,
      telefoneColeta,
      enderecoEntrega,
      distanciaKm,
      taxa,
      status: 'pendente',
      motoboyNome: '',
      motoboyWhatsApp: '',
      dataHoraPedido: new Date().toLocaleString()
    };

    // Pega pedidos do localStorage ou cria array vazio
    let pedidos = JSON.parse(localStorage.getItem('pedidos')) || [];
    pedidos.push(pedido);
    localStorage.setItem('pedidos', JSON.stringify(pedidos));

    this.reset();
    document.getElementById('msgSucesso').style.display = 'block';
  });
</script>
</body>
</html>
